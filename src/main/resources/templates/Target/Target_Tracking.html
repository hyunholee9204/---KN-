<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>목표 달성 트래킹</title>
    <link rel="stylesheet" href="/css/g/target-main.css">
</head>
<body>
<!-- 상단 바 -->
<div class="header">
    <div class="header-left" onclick="goToMain()">KN금융</div>
    <div class="nav-wrapper">
        <div class="nav-menu">
            <a href="/asset">자산 관리</a>
            <a href="/loans">대출 관리</a>
            <a href="/target">목표 달성 트래킹</a>
            <a href="/education/guide">교육 및 정보</a>
            <a href="/notice">공지사항</a>
            <a href="/inquiry">고객센터</a>
        </div>
    </div>
</div>

<!-- 페이지 본문 -->
<div class="container">
    <!-- 사이드바 -->
    <div class="sidebar">
        <button onclick="location.href='/target/register'">목표 등록</button>
        <button onclick="location.href='/target/progress'">진행 상황</button>
    </div>

    <!-- 메인 콘텐츠 -->
    <div class="content">
        <h2>나의 목표 현황</h2>

        <!-- 목표가 없을 때 -->
        <div th:if="${#lists.isEmpty(targets)}">
            <p>아직 등록된 목표가 없습니다. 목표를 설정해보세요!</p>
        </div>

        <!-- 목표가 있을 때 -->
        <div class="goal-list" th:if="${!#lists.isEmpty(targets)}">
            <div class="goal-card" th:each="goal : ${targets}">
                <h3 th:text="${goal.title}">목표 이름</h3>
                <p>
                    <strong>기간:</strong>
                    <span th:text="${goal.startDate}"></span> ~
                    <span th:text="${goal.endDate}"></span>
                </p>
                <p>
                    <strong>목표 금액:</strong>
                    <span th:text="${#numbers.formatInteger(goal.goalAmount, 3, 'COMMA')} + '원'"></span>
                </p>
                <p>
                    <strong>현재 금액:</strong>
                    <span th:text="${#numbers.formatInteger(goal.totalAmount, 3, 'COMMA')} + '원'"></span>
                </p>
                <div class="progress-bar">
                    <div class="progress"
                         th:style="'width:' + ${goal.progress} + '%'"></div>
                </div>

                <p th:text="'진행률: ' + ${#numbers.formatDecimal(goal.progress, 1, 2)} + '%'"></p>
                <p th:if="${goal.endDate != null}"
                   th:text="|남은 기간: ${goal.daysLeft}일|"></p>

                <!-- 수정/삭제 버튼 -->
                <div class="goal-actions">
                    <form th:action="@{'/target/edit/' + ${goal.id}}" method="get">
                        <button type="submit" class="edit-btn">수정</button>
                    </form>
                    <form th:action="@{'/target/delete/' + ${goal.id}}" method="post"
                          onsubmit="return confirm('정말 삭제하시겠습니까?');">
                        <button type="submit" class="delete-btn">삭제</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function goToMain() {
        window.location.href = "/main";
    }
</script>
</body>
</html>

