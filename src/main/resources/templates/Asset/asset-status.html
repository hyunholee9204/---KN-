<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>자산 현황</title>
    <link rel="stylesheet" href="/css/a/a-status.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<div class="header">
    <div class="header-left" onclick="goToMain()">KN금융</div>
    <div class="nav-wrapper">
        <div class="nav-menu">
            <a href="/asset">자산 관리</a>
            <a href="/loans">대출 관리</a>
            <a href="/target">목표 달성 트래킹</a>
            <a href="/education/guide">교육 및 정보</a>
            <a href="/notice">공지사항</a>
            <a href="/inquiry">고객센터</a>
        </div>
    </div>
</div>

<!-- 메인 컨테이너 -->
<div class="container">
    <!-- 왼쪽 사이드바 -->
    <div class="sidebar">
        <button onclick="location.href='/asset/status'">자산 현황</button>
        <button onclick="location.href='/asset/transaction/all'">자산 내역 조회</button>
        <button onclick="location.href='/asset/history'">월별 변동 내역</button>
        <button onclick="location.href='/asset/goal'">목표 달성용 자산 등록</button>
    </div>

    <!-- 오른쪽 콘텐츠 -->
    <div class="content">
        <div class="asset-box">
            <h2 th:text="${userName} + '님의 자산 현황입니다.'"></h2>

            <!-- 자산 카드 레이아웃 -->
            <div class="asset-cards">
                <!-- 기타 -->
                <div class="asset-card">
                    <div class="asset-icon"><i class="fa-solid fa-box-archive"></i></div>
                    <h3>기타</h3>
                    <p th:text="${#numbers.formatInteger(groupedAssetsMap['기타'], 3, 'COMMA')} + '원'"></p>
                </div>

                <!-- 예금 -->
                <div class="asset-card">
                    <div class="asset-icon"><i class="fa-solid fa-piggy-bank"></i></div>
                    <h3>예금</h3>
                    <p th:text="${#numbers.formatInteger(groupedAssetsMap['예금'], 3, 'COMMA')} + '원'"></p>
                </div>

                <!-- 주식 -->
                <div class="asset-card">
                    <div class="asset-icon"><i class="fa-solid fa-chart-line"></i></div>
                    <h3>주식</h3>
                    <p th:text="${#numbers.formatInteger(groupedAssetsMap['주식'], 3, 'COMMA')} + '원'"></p>
                </div>

                <!-- 부동산 -->
                <div class="asset-card">
                    <div class="asset-icon"><i class="fa-solid fa-building"></i></div>
                    <h3>부동산</h3>
                    <p th:text="${#numbers.formatInteger(groupedAssetsMap['부동산'], 3, 'COMMA')} + '원'"></p>
                </div>

                <!-- 가상자산 -->
                <div class="asset-card">
                    <div class="asset-icon"><i class="fa-brands fa-bitcoin"></i></div>
                    <h3>가상자산</h3>
                    <p th:text="${#numbers.formatInteger(groupedAssetsMap['가상자산'], 3, 'COMMA')} + '원'"></p>
                </div>

                <!-- 현금 -->
                <div class="asset-card">
                    <div class="asset-icon"><i class="fa-solid fa-sack-dollar"></i></div>
                    <h3>현금</h3>
                    <p th:text="${#numbers.formatInteger(groupedAssetsMap['현금'], 3, 'COMMA')} + '원'"></p>
                </div>

                <!-- ✅ 목표전용자산 -->
                <div class="asset-card">
                    <div class="asset-icon"><i class="fa-solid fa-bullseye"></i></div>
                    <h3>목표전용자산</h3>
                    <p th:text="${#numbers.formatInteger(groupedAssetsMap['목표전용자산'], 3, 'COMMA')} + '원'"></p>
                </div>
            </div>

            <!-- 총 자산 금액 -->
            <div class="total-amount">
                👉 총 자산 금액:
                <span th:text="${#numbers.formatInteger(assetAmount, 3, 'COMMA')} + '원'"></span>
            </div>

            <hr/>

            <!-- 등록된 자산 상세 (표 형태) -->
            <div class="asset-details">
                <h3>등록된 자산 상세</h3>
                <table>
                    <thead>
                    <tr>
                        <th>자산 종류</th>
                        <th>금액</th>
                        <th>수정</th>
                        <th>삭제</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="asset : ${assetList}">
                        <td th:text="${asset.type}"></td>
                        <td th:text="${#numbers.formatInteger(asset.amount, 3, 'COMMA')} + '원'"></td>
                        <td>
                            <a th:href="@{'/asset/update/' + ${asset.id}}" class="edit-btn">수정</a>
                        </td>
                        <td>
                            <form th:action="@{'/asset/deleteOne/' + ${asset.id}}" method="post"
                                  onsubmit="return confirm('정말 삭제하시겠습니까?');">
                                <button type="submit" class="delete-btn">삭제</button>
                            </form>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <!-- 자산 추가/전체 삭제 버튼 -->
            <div class="actions">
                <a href="/asset/register">
                    <button class="edit-btn">자산 추가하기</button>
                </a>
                <form action="/asset/delete" method="post" style="display:inline;"
                      onsubmit="return confirm('모든 자산을 삭제하시겠습니까?');">
                    <button type="submit" class="delete-btn">자산 전체 삭제</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    function goToMain() {
        window.location.href = "/main";
    }
</script>

</body>
</html>

